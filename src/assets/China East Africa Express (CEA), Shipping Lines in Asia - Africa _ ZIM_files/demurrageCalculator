function SetFreeDays(){var n={startDate:$("#lbl-search-03").val(),endDate:$("#lbl-search-04").val(),containerType:$("#demurrageContTypeSelect").val(),tariffType:$("#demurrageTariffTypeSelect").val(),direction:$("#Direction_0").prop("checked")?"IM":"EX",countryCode:$("#demurageCountryMain").val(),portCode:$("#portSelect").val()};n=JSON.stringify({model:n});$.ajax({url:"/umbraco/surface/DemurrageDetentionTariff/GetFreeDays",type:"POST",dataType:"json",data:n,contentType:"application/json; charset=utf-8",complete:function(n){$("#freeDays").val(n.responseText)}})}function initCalculatorDatePickers(){var i=$("html").attr("lang"),n,t;$(".input-daterange").datepicker({language:"en",format:"dd-M-yyyy",clearBtn:!0,autoclose:!0,enableOnReadonly:!1,rtl:i==="he"}).on("changeDate",function(n){if($(".split-type").length&&n.target.id===$(".tariffs-border:first .input-daterange input:last").attr("id")&&$(".tariffs-border:first .input-daterange input:last").data().datepicker.dates[0]!==undefined&&$(".tariffs-border:first .input-daterange input:last").data().datepicker.dates[0]!==""){var t=new Date($(".tariffs-border:first .input-daterange input:last").data().datepicker.dates[0]),r=new Date(t.setDate(t.getDate())),i=new Date(t.setDate(t.getDate()+1));$(".tariffs-border:last .input-daterange input:first").datepicker("setDate",r);$(".tariffs-border:last .input-daterange input:last").datepicker("setStartDate",i);$(".tariffs-border:last .input-daterange input:last").datepicker("setDate",i)}});$(".split-type").length&&(n=new Date($(".tariffs-border:first .input-daterange input:last").data().datepicker.dates[0]),t=new Date(n.setDate(n.getDate()+1)),$(".tariffs-border:last .input-daterange input:last").datepicker("setStartDate",t));$(".input-group-addon").click(function(){$(this).closest("div").find("input:first").datepicker("show")})}$(document).ready(function(){var n=$('a[data-href="#mobile-bottom-panel-1"]').attr("data-page-id");$(".port-demurrage-data").length?($("#demurrageContTypeSelect").change(function(){SetFreeDays()}),$(".main-demurrage-data #Direction_1, .main-demurrage-data #Direction_0").change(function(){$(".port-demurrage-data").remove();$.fn.SetContainerTypes()}),$("#demurrageContTypeSelect").change(function(){$(".port-demurrage-data").remove();$.fn.setAdditionalParameters(n)}),$("#demurageCountry").change(function(){$(".port-demurrage-data").remove()}),$("#portSelect").change(function(){$(".port-demurrage-data").remove();$.fn.SetContainerTypes()}),initCalculatorDatePickers(),$("#freeDays, #freeDaysAdditional").change(function(){var n=parseInt($(this).attr("min"));$(this).val()<n?$(this).parent().find(".demurrageCalcMinFreeDays").show():$(this).parent().find(".demurrageCalcMinFreeDays").hide()})):($(".demurrage-calculator .demurrage-calculator-port select").change(function(){$(".port-demurrage-data").remove();$.fn.SetContainerTypes()}),$(".main-demurrage-data #Direction_1, .main-demurrage-data #Direction_0").change(function(){$(".port-demurrage-data").remove();$.fn.SetContainerTypes()}),$("#demurrageContTypeSelect").change(function(){$(".port-demurrage-data").remove();$.fn.setAdditionalParameters(n)}),$("#demurageCountry").change(function(){$(".port-demurrage-data").remove()}))});$.fn.setAdditionalParameters=function(n){var i=$("html").attr("data-culture"),t;!$("#portSelect").val()==""&&(t=$("#Direction_0").prop("checked")?"IM":"EX",$.ajax({url:"/umbraco/surface/DemurrageDetentionTariff/RenderAdditionalParameters?countryCode="+$("#demurageCountryMain").val()+"&portCode="+$("#portSelect").val()+"&pageId="+n+"&culture="+i+"&contType="+$("#demurrageContTypeSelect").val()+"&direction="+t,success:function(n){$(".port-demurrage-data").remove();$(n).insertAfter(".demurrage-calculator-containers-number");initCalculatorDatePickers();$("#demurageCountry").change(function(){$(".port-demurrage-data").remove()});$(".selectpicker").selectpicker({style:""})}}))};$.fn.SetContainerTypes=function(){var n=$("#demurageCountryMain").val(),t=$("#portSelect").val(),i=$("#Direction_0").prop("checked")?"IM":"EX";$("#demurrageContTypeSelect option").each(function(n){n!==0&&$(this).remove()});$("#demurrageContTypeSelect").selectpicker("refresh");$.ajax({url:"/umbraco/surface/DemurrageDetentionTariff/GetDemurrageContainerTypes?countryCode="+n+"&portCode="+t+"&direction="+i,type:"get",success:function(n){n&&($.each(n,function(n,t){if(t){var i=$("<option><\/option>").attr("value",t.Value).append($("<div><\/div>").addClass("suggestion-text").html(t.Text));$("#demurrageContTypeSelect").append(i)}}),$("#demurrageContTypeSelect").removeAttr("disabled"),$("#demurrageContTypeSelect").selectpicker("refresh"))},cache:!1})}